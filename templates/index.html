{% extends "base.html" %}

{% block content %}

    <div class="carousel-container">
        <div class="carousel-slide active" style="background-image: url('{{ url_for('static', filename='img/banner1.jpg') }}');">
            <div class="carousel-caption">
                <h1 data-aos="fade-down">Delicias del Mar</h1>
                <p data-aos="fade-up">Sabor fresco a tu mesa.</p>
            </div>
        </div>
        <div class="carousel-slide" style="background-image: url('{{ url_for('static', filename='img/banner2.jpg') }}');">
            <div class="carousel-caption">
                <h1>Ingredientes Selectos</h1>
                <p>La mejor pesca del d√≠a.</p>
            </div>
        </div>
        <div class="carousel-slide" style="background-image: url('{{ url_for('static', filename='img/banner3.jpg') }}');">
            <div class="carousel-caption">
                <h1>¬°Haz tu pedido!</h1>
                <p>Servicio a domicilio r√°pido.</p>
            </div>
        </div>
    </div>

    <div class="container">
        
        <h2 style="text-align: center; margin: 40px 0 20px 0; color: #006994;">Nuestro Men√∫</h2>

        <div class="buscador-container" data-aos="fade-up">
            <form action="/" method="GET" class="search-form">
                <input type="text" name="q" placeholder="Buscar plato..." value="{{ busqueda if busqueda else '' }}">
                <button type="submit"><i class="fa-solid fa-search"></i></button>
            </form>
        </div>

        <div class="filtros">
            <a href="/" class="btn-filtro {% if cat_actual == 'todos' %}activo{% endif %}">Todos</a>
            <a href="/categoria/entradas" class="btn-filtro {% if cat_actual == 'entradas' %}activo{% endif %}">Entradas</a>
            <a href="/categoria/sopas" class="btn-filtro {% if cat_actual == 'sopas' %}activo{% endif %}">Sopas</a>
            <a href="/categoria/fuertes" class="btn-filtro {% if cat_actual == 'fuertes' %}activo{% endif %}">Fuertes</a>
            <a href="/categoria/arroces" class="btn-filtro {% if cat_actual == 'arroces' %}activo{% endif %}">Arroces</a>
        </div>

        <div class="catalogo">
            {% for plato in menu %}
                <div class="tarjeta" data-aos="fade-up">
                    <a href="{{ url_for('detalle', id_plato=plato.id) }}">
                        <div class="imagen-wrapper">
                            <img src="{{ url_for('static', filename='img/' + plato.foto) }}" alt="{{ plato.nombre }}">
                        </div>
                    </a>
                    <div class="contenido">
                        <a href="{{ url_for('detalle', id_plato=plato.id) }}" style="text-decoration: none;">
                            <h2>{{ plato.nombre }}</h2>
                        </a>
                        <div class="precio">${{ "%.2f"|format(plato.precio) }}</div>
                        
                        <button onclick="agregarAlCarrito('{{ plato.nombre }}', {{ plato.precio }})" class="btn-comprar" style="border:none; cursor:pointer; width:100%;">
                            <i class="fa-solid fa-cart-plus"></i> Agregar
                        </button>
                    </div>
                </div>
            {% else %}
                <p style="text-align:center; width:100%;">No encontramos platos. <a href="/">Ver todo</a></p>
            {% endfor %}
        </div>
    </div>

    <div id="reservas" class="reserva-section" data-aos="fade-right">
        <div class="container reserva-grid">
            <div class="reserva-info">
                <h2>Reserva tu Mesa üçΩÔ∏è</h2>
                <p>Reserva ahora y te enviaremos la confirmaci√≥n a tu correo.</p>
                <ul>
                    <li>‚úîÔ∏è Ambiente familiar</li>
                    <li>‚úîÔ∏è Aire acondicionado</li>
                    <li>‚úîÔ∏è Parqueo privado</li>
                </ul>
            </div>
            <div class="reserva-form-card">
                <form id="formReserva">
                    <label>Nombre:</label>
                    <input type="text" id="res_nombre" required placeholder="Tu nombre">
                    
                    <label>Correo Electr√≥nico:</label> <input type="email" id="res_email" required placeholder="ejemplo@correo.com">
                    
                    <label>Fecha:</label>
                    <input type="date" id="res_fecha" required>
                    
                    <label>Hora:</label>
                    <input type="time" id="res_hora" required>
                    
                    <label>Personas:</label>
                    <input type="number" id="res_personas" value="2" required>
                    
                    <button type="submit" class="btn-reservar">Reservar</button>
                </form>
            </div>
        </div>
    </div>

    <div class="testimonios-section">
        <h2 style="text-align: center; color: #006994; margin-bottom: 40px;">Lo que dicen nuestros clientes</h2>
        <div class="testimonios-grid">
            <div class="testimonio-card" data-aos="flip-left">
                <div class="estrellas">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                <p>"El mejor ceviche de Puebloviejo. La frescura es incre√≠ble."</p>
                <h4>- Mar√≠a P√©rez</h4>
            </div>
            <div class="testimonio-card" data-aos="flip-left" data-aos-delay="200">
                <div class="estrellas">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                <p>"El servicio es r√°pido y la sopa marinera es obligatoria."</p>
                <h4>- Carlos Ruiz</h4>
            </div>
            <div class="testimonio-card" data-aos="flip-left" data-aos-delay="400">
                <div class="estrellas">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                <p>"Ped√≠ por WhatsApp y lleg√≥ caliente. ¬°Recomendado!"</p>
                <h4>- Sof√≠a M.</h4>
            </div>
        </div>
    </div>

    <div class="mapa-section" data-aos="fade-up">
        <h2 style="text-align: center; color: #006994; margin-bottom: 20px;">Vis√≠tanos en Puebloviejo</h2>
        <div class="mapa-wrapper">
            <iframe 
                src="https://maps.google.com/maps?q=Canton+Puebloviejo+Ecuador&t=&z=15&ie=UTF8&iwloc=&output=embed" 
                width="100%" height="400" style="border:0;" allowfullscreen="" loading="lazy">
            </iframe>
        </div>
    </div>

{% endblock %}